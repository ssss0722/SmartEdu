<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.CourseHomeworkQuestionDao">

    <select id="selectListView" resultType="com.entity.view.CourseHomeworkQuestionView">
        SELECT
        chq.id,
        chq.addtime,
        chq.paperid,
        chq.question_id,
        chq.t_username,
        eqb.title AS question_name,
        eqb.options,
        eqb.score,
        eqb.answer,
        eqb.analysis,
        eqb.type,
        eqb.sequence,
        ch.name AS homework,
        ut.t_name AS tName,
        cc.course AS course
        FROM question chq
        LEFT JOIN question_bank eqb ON chq.question_id = eqb.id
        LEFT JOIN exam_homework ch ON chq.paperid = ch.id
        LEFT JOIN user_teacher ut ON chq.t_username = ut.t_username
        LEFT JOIN paper p ON ch.paper_id = p.id
        LEFT JOIN course_categories cc ON p.course_id = cc.id  <!-- 修改这里 -->
        <where>
            1=1
            AND p.status = 0
            ${ew.sqlSegment}
        </where>
    </select>
    <select id="selectView" resultType="com.entity.view.CourseHomeworkQuestionView">
        SELECT
        chq.id,
        chq.addtime,
        chq.paperid,
        chq.question_id,
        chq.t_username,
        eqb.title AS question_name,
        eqb.options,
        eqb.score,
        eqb.answer,
        eqb.analysis,
        eqb.type,
        eqb.sequence,
        ch.name AS homework,
        ut.t_name AS tName,
        cc.course AS course
        FROM question chq
        LEFT JOIN question_bank eqb ON chq.question_id = eqb.id
        LEFT JOIN exam_homework ch ON chq.paperid = ch.id
        LEFT JOIN user_teacher ut ON chq.t_username = ut.t_username
        LEFT JOIN paper p ON ch.paper_id = p.id
        LEFT JOIN course_categories cc ON p.course_id = cc.id  <!-- 修改这里 -->
        <where>
            1=1
            AND p.status = 0
            ${ew.sqlSegment}
        </where>
    </select>
</mapper>